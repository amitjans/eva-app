const list = document.querySelector("#list");
var int = [];
window.onload = function () {
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            let obj = JSON.parse(req.responseText);
            let result = '';
            for (let i = 0; i < obj.length; i++) {
                result += intbutton(obj[i]._id, obj[i].nombre);
                if (i + 1 < obj.length) {
                    i++;
                    result += intbutton(obj[i]._id, obj[i].nombre);
                }
                result += `<br/><br/><br/><br/><br/>`;
            }
            list.innerHTML = result;
            document.querySelectorAll("#int").forEach(item => {
                item.addEventListener('click', e => {
                    execute(e.target.id);
                });
            });
        }
    };
    req.open("GET", "http://127.0.0.1:3000/api/common?db=interaccion", true);
    req.send();
}

function intbutton(value1, value2) {
    return `<div id="int" class="col-md-6"><span class="btn btn-lg btn-warning btn-block int" id="${value1}">${value2}</span></div>`;
}

function execute(id) {
    changeview('viewint', 'vieweyes');
    fullscreenButton.click();
    var e = new XMLHttpRequest();
    e.open("GET", "http://127.0.0.1:3000/api/interaccion/" + id, true);
    e.send();
}