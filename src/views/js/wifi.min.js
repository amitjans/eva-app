const wifi = document.querySelector('#wifilist');
ipcRenderer.send('wifi:scan', { method: 'get' });

document.querySelectorAll('.alert.alert-info').forEach(w => {
    w.addEventListener('click', e => {
    document.querySelector('#name').value(e.target.children.children.children.value);
    })
});

ipcRenderer.on('wifi:list', (e, obj) => {
    console.log(obj);
    wifi.innerHTML = '';
    for (let i = 0; i < obj.length; i++) {
    wifi.innerHTML += `<button type="button" class="w-100 btn btn-lg btn-outline-primary wifi" onclick="select('${obj[i].ssid}')">
                <span class="bi bi-${qualityIcon(obj[i].quality)}"></span>&nbsp;${obj[i].ssid}&nbsp;<span class="fa fa-${obj[i].security != '' ? 'lock' : 'unlock'}"></span>
                </button>`;
    }
});

function qualityIcon(quality) {
    if (quality > 90) {
        return 'wifi';
    } else if (quality > 70) {
        return 'wifi-2';
    }
    return 'wifi-1';
}

const form = document.querySelector('form');
form.addEventListener('submit', e => {
    const name = document.querySelector('#name').value;
    const pass = document.querySelector('#pass').value;
    const newWifi = { name: name, pass: pass };
    ipcRenderer.send('wifi:new', newWifi);
    changeview('vieweyes');
    e.preventDefault();
});

function select(params) {
    document.querySelector('#name').value = params;
    changeview('viewwifi2');
};